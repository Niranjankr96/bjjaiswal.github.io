<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to Structure Machine Learning Projects - Bikash-Jaiswal Blog</title>
    <meta name="author"  content="bikash">
    <meta name="description" content="How to Structure Machine Learning Projects">
    <meta name="keywords"  content="Deep-Learning">
    <!-- Open Graph -->
    <meta property="og:title" content="How to Structure Machine Learning Projects - Bikash-Jaiswal Blog">
    <meta property="og:type" content="website">
    <meta property="og:url" content="http://bikash-jaiswal.github.io/2018/04/20/Machine-Learning-Strategy-in-Deep-Learning.html">
    <meta property="og:description" content="You have the capacity to learn from your mistakes, and you will learn a lot today.">
    <meta property="og:site_name" content="Bikash-Jaiswal Blog">
    <link rel="stylesheet" href="//cdn.staticfile.org/normalize/6.0.0/normalize.min.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_roc50gemkxpw4s4i.css">
    <link rel="stylesheet" href="/assets/css/github-markdown.css">
    <link rel="stylesheet" href="/assets/css/prism.css">
    <link rel="stylesheet" href="/assets/css/share.min.css">
    <link rel="stylesheet" href="/assets/css/app.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
	
	<!--
Author: Ray-Eldath
refer to:
 - http://docs.mathjax.org/en/latest/options/index.html
-->

	<script type="text/javascript" async src="https://cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
	
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
		jax: ["input/TeX", "output/HTML-CSS"],
		tex2jax: {
			inlineMath: [ ["$", "$"] ],
			displayMath: [ ["$$", "$$"] ],
			skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
		},
		"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
      });
    </script>

	
    <!--
Author: Ray-Eldath
-->
<style>
    .markdown-body .anchor{
        float: left;
        margin-top: -8px;
        margin-left: -20px;
        padding-right: 4px;
        line-height: 1;
        opacity: 0;
    }
    
    .markdown-body .anchor .anchor-icon{
        font-size: 15px
    }
</style>
<script>
    $(document).ready(function() {
        let nodes = document.querySelector(".markdown-body").querySelectorAll("h1,h2,h3")
        for(let node of nodes) {
            var anchor = document.createElement("a")
            var anchorIcon = document.createElement("i")
            anchorIcon.setAttribute("class", "fa fa-anchor fa-lg anchor-icon")
            anchorIcon.setAttribute("aria-hidden", true)
            anchor.setAttribute("class", "anchor")
            anchor.setAttribute("href", "#" + node.getAttribute("id"))
            
            anchor.onmouseover = function() {
                this.style.opacity = "0.4"
            }
            
            anchor.onmouseout = function() {
                this.style.opacity = "0"
            }
            
            anchor.appendChild(anchorIcon)
            node.appendChild(anchor)
        }
    })
</script>
</head>


<body>
  <!--[if lt IE 10]>
<div class="alert-danger" role="alert">‰Ω†ÁöÑÊµèËßàÂô®ÂÆûÂú®Â§™Â§™Â§™Êóß‰∫ÜÔºåÊîæÂ≠¶Âà´Ëµ∞ÔºåÂçáÁ∫ßÂÆåÊµèËßàÂô®ÂÜçËØ¥ÔºÅ<a target="_blank" class="alert-link" href="http://browsehappy.com">Á´ãÂç≥ÂçáÁ∫ß</a></div>
<![endif]-->
  <input id="nm-switch" type="hidden" value="true"> <header class="g-header">
    <div class="g-logo">
      <a href="/"></a>
    </div>
    <i id="menu-toggle" class="iconfont icon-menu"></i>
    <nav class="g-nav">
        <ul>
            
            <li><a href="/">home</a></li>
            
            <li><a href="/about.html">about</a></li>
            
            <li><a href="/tags.html">tags</a></li>
            
        </ul>
    </nav>
</header>


  <header class="g-banner post-header post-pattern-circuitBoard bgcolor-default " data-theme="default">
    <div class="post-wrapper">
      <div class="post-tags">
        
          
            <a href="tags#Deep-Learning" class="post-tag">Deep-Learning</a>
          
        
      </div>
      <h1>How to Structure Machine Learning Projects</h1>
      <div class="post-meta">
        <span class="post-meta-item"><i class="iconfont icon-author"></i><a href="http://bikash-jaiswal.github.io" target="_blank" rel="author">bikash</a></></span>
        <time class="post-meta-item" datetime="18-04-20"><i class="iconfont icon-date"></i>20 Apr 2018</time>
      </div>
    </div>
    
    <div class="filter"></div>
      <div class="post-cover" style="background: url('https://i2.wp.com/philosophyofbrains.com/wp-content/uploads/2016/05/Problem-Mental-Causation-Pic.jpg?resize=1280%2C585') center no-repeat; background-size: cover;"></div>
    
  </header>

  <div class="post-content visible">
    

    <article class="markdown-body">
      <p>Even after developing a model, We find that prediction accuracy is 90% but that isn‚Äôt good enough for production purpose because there are whole 10% error in prediction. So, we apply some technique to improve it like:</p>
<ul>
  <li>Collecting more diverse positive and negative training data</li>
  <li>train the algorithm with gradient descent or use advance optimization algorithm like Adam.</li>
  <li>Trying different network from smaller to bigger</li>
  <li>also trying different regularization and dropout or changing the activation functions and number of hidden units.</li>
</ul>

<h2 id="how-to-structure-machine-learning-projects">How to Structure Machine Learning Projects</h2>
<p>Applying above technique may not give always give desired result despite spending months on collecting data. Therefore, Some strategies is necessary which helps us in improving the accuracy of models.</p>

<h3 id="orthogonalization">Orthogonalization</h3>
<p>There are hundreds of parameters and hyperparameters to tune to increase the prediction accuracy but it‚Äôs cumbersome and tedious task to do. Here comes the role orthogonalization or orthogonality.</p>

<p>The word orthogonal means ‚ÄúStatistically independent‚Äù. So,<code class="highlighter-rouge">Orthogonalization or orthogonality can be stated as a system design property that assures that modifying an instruction or a component of an algorithm will not create or propagate side effects  to  other components of the system.</code> It becomes easier to verify the algorithms independently from one another, it reduces testing and development time.</p>

<p>Let‚Äôs take to metaphorical example of old television and car steering.</p>

<figure>
  <div style="text-align:center">
    <img src="/assets/img/ml-strategies/tv-car.jpg" alt="metaphor" />
    <figcaption> Metaphor for orthogonality </figcaption>
  </div>
</figure>

<p>We can tune the picture on tv by varying the properties of knob of tv. Similarly, changing the steering of car can makes change in different direction to go.</p>

<p>When a supervised learning system is design, these are the 4 assumptions that needs to be true and orthogonal.</p>
<ol>
  <li>Fit training set well in cost function
    <ul>
      <li>If it doesn‚Äôt fit well then use of a bigger neural network or use a better optimization algorithm.</li>
    </ul>
  </li>
  <li>Fit development set well on cost function
    <ul>
      <li>If it doesn‚Äôt fit well then use regularization or use bigger training set and use bigger training set.</li>
    </ul>
  </li>
  <li>Fit test set well on cost function
    <ul>
      <li>If it doesn‚Äôt fit well then use bigger Development set</li>
    </ul>
  </li>
  <li>Performs well in real world
    <ul>
      <li>If it doesn‚Äôt fit well then change development set  or cost function.</li>
    </ul>
  </li>
</ol>

<h3 id="different-tuning-method-or-method-for-improving-our-model">Different tuning method or method for improving our model.</h3>
<h4 id="using-a-single-number-evaluations-metric-ief1-score">Using a single number evaluations metric. i.e.F1 score</h4>

<figure>
  <div style="text-align:center">
    <img src="/assets/img/ml-strategies/decision.png" alt="decision" />
    <figcaption> Confusion Matrix </figcaption>
  </div>
</figure>

<p><strong>Precision</strong> : Of all the images we predicted y=1, what fraction of it have cats?</p>
<figure>
   <div style="text-align:center">
     <img src="/assets/img/ml-strategies/precision.png" alt="my alt text" />
   </div>
 </figure>

<p><strong>Recall</strong> : Of all the images that actually have cats, what fraction of it did we correctly identifying have cats?</p>
<figure>
   <div style="text-align:center">
     <img src="/assets/img/ml-strategies/recall.png" alt="my alt text" />
   </div>
 </figure>

<p>Let‚Äôs compare 2 classifiers A and B used to evaluate if there are cat images:</p>
<figure>
  <div style="text-align:center">
    <img src="/assets/img/ml-strategies/evaluation-matrix.png" alt="my alt text" />
  </div>
</figure>

<p>In this case the evaluation metrics are precision and recall.</p>

<p>For classifier A, there is a 95% chance that there is a cat in the image and a 90% chance that it has correctly detected a cat. Whereas for classifier B there is a 98% chance that there is a cat in the image and a 85% chance that it has correctly detected a cat.</p>

<p>The problem with using precision/recall as the evaluation metric is that you are not sure which one is better since in this case, both of them have a good precision et recall. F1-score, a harmonic mean, combine both precision and recall.</p>
<figure>
  <div style="text-align:center">
    <img src="/assets/img/ml-strategies/F1-score.png" alt="my alt text" />
  </div>
</figure>

<p>Classifier A is a better choice. F1-Score is not the only evaluation metric that can be use, the average, for
example, could also be an indicator of which classifier to use.</p>

<h4 id="satisficing-and-optimizing-metrics">Satisficing and optimizing metrics.</h4>
<p>There are different metrics to evaluate the performance of a classifier, they are called <code class="highlighter-rouge">evaluation matrices</code>.
They can be categorized as <code class="highlighter-rouge">satisficing</code> and <code class="highlighter-rouge">optimizing</code> matrices. It is important to note that these evaluation matrices must be evaluated on a training set, a development set or on the test set.</p>

<blockquote>

  <ul>
    <li>optimizing ‚Äî&gt; best accuracy</li>
    <li>satisficing ‚Äî&gt; running &lt;= X ms.</li>
  </ul>
</blockquote>

<figure>
  <div style="text-align:center">
    <img src="/assets/img/ml-strategies/3table.png" alt="my alt text" />
  </div>
</figure>

<p>In this case, accuracy and running time are the evaluation matrices. Accuracy is the optimizing metric,
because you want the classifier to correctly detect a cat image as accurately as possible. The running time
which is set to be under 100 ms in this example, is the satisficing metric which mean that the metric has
to meet expectation set.</p>

<h4 id="traindevtest-set-distributions">Train/dev/test set distributions</h4>
<p>Setting up the training, development and test sets have a huge impact on productivity. It is important to
choose the development and test sets from the same distribution and it must be taken randomly from all
the data. <code class="highlighter-rouge">Test set should be big enough to give high confidence in the overall performance of your system.</code></p>

<p>In dataset where data instances are few like below 100,000, researcher has used 80-20 rule.</p>
<figure>
  <div style="text-align:center">
    <img src="/assets/img/ml-strategies/old-dist.png" alt="my alt text" />
    <figcaption> Strategy of distribution in machine learning </figcaption>
  </div>
</figure>
<p>but because of generation Big Data, they have changed the rule to 98-1-1.</p>
<figure>
  <div style="text-align:center">
    <img src="/assets/img/ml-strategies/new-dist.png" alt="my alt text" />
    <figcaption> Strategy of distribution in Deep Learning </figcaption>
  </div>
</figure>

<h4 id="when-to-change-devtest-sets-and-metrics">When to change dev/test sets and metrics</h4>
<p>A cat classifier tries to find a great amount of cat images to show to cat loving users. The evaluation metric used is a classification error.</p>

<figure>
  <div style="text-align:center">
    <img src="/assets/img/ml-strategies/error.png" alt="my alt text" />
    <figcaption> Strategy of distribution in machine learning </figcaption>
  </div>
</figure>
<p>It seems that <code class="highlighter-rouge">Algorithm A is better than Algorithm B</code> since there is only a 3% error, however for some reason, Algorithm A is letting through a lot of the pornographic images. Algorithm B has 5% error thus it classifies fewer images but it doesn‚Äôt have pornographic images. From a company‚Äôs point of view, as well as from a user acceptance point of view, <code class="highlighter-rouge">Algorithm B is actually a better
algorithm</code>. The evaluation metric fails to correctly rank order preferences between algorithms. The evaluation metric or the development set or test set should be changed.</p>

<p>The misclassification error metric can be written as a function as follow:</p>
<figure>
  <div style="text-align:center">
    <img src="/assets/img/ml-strategies/misclass.png" alt="misclassification" />
  </div>
</figure>

<p>This function counts up the number of misclassified examples.
The problem with this evaluation metric is that it treats pornographic vs non-pornographic images equally. On way to change this evaluation metric is to add the weight term ùë§<sup>(ùëñ)</sup>.</p>
<figure>
  <div style="text-align:center">
    <img src="/assets/img/ml-strategies/more-weight.png" alt="misclassification" />
  </div>
</figure>
<p>The function becomes:</p>
<figure>
  <div style="text-align:center">
    <img src="/assets/img/ml-strategies/changed-equation.png" alt="misclassification" />
  </div>
</figure>

<p><strong>Reminder</strong>:</p>

<ul>
  <li>Define correctly an evaluation metric that helps better rank order classifiers</li>
  <li>Optimize the evaluation metric</li>
</ul>

<h4 id="summary-of-orthogonalization">Summary of orthogonalization</h4>
<ul>
  <li>[x] Define a metric to evaluate a classifier</li>
  <li>[x] Separately improve the metric to improve accuracy</li>
  <li>[x] Change metric and/or dev/test set, if previous choosen  metric + dev/test fails.</li>
</ul>

    </article>

    
    <div class="social-share-wrapper">
      <div class="social-share"></div>
    </div>
    
  </div>

  <section class="author-detail">
    <section class="post-footer-item author-card">
      <div class="avatar">
        <img src="/assets/img/profile.png" alt="">
      </div>
      <div class="author-name" rel="author">bikash</div>
      <div class="bio">
        <p></p>
      </div>
      
      <ul class="sns-links">
        
        <li>
          <a href="https://www.linkedin.com/in/bikashjaiswal" target="_blank">
                    <i class="iconfont icon-linkedin"></i>
                </a>
        </li>
        
        <li>
          <a href="https://www.github.com/bikash-jaiswal" target="_blank">
                    <i class="iconfont icon-github"></i>
                </a>
        </li>
        
        <li>
          <a href="bjjaiswal@gmail.com" target="_blank">
                    <i class="iconfont icon-email"></i>
                </a>
        </li>
        
      </ul>
      
    </section>
    <section class="post-footer-item read-next">
      
      <div class="read-next-item">
        <a href="/2018/05/30/Introduction-to-Artificial-Intelligence-and-its-branches.html" class="read-next-link"></a>
        <section>
          <span>How they differ? Artificial Intelligence vs machine Learning vs Deep Learning</span>
          <p>We have come far beyond Information Technology age. We ar...</p>
        </section>
        
        <div class="filter"></div>
        <img src="https://analyticsindiamag.com/wp-content/uploads/2017/08/handwriting-human-head-shape-imagination-technology-innovation-artificial-intelligence-at-chalkboard_h7plpruc_thumbnail-full11.png" alt="">
        
     </div>
      

      
      <div class="read-next-item">
        <a href="/2018/04/16/Practical-aspects-of-Deep-Learning.html" class="read-next-link"></a>
          <section>
            <span>Practical aspects of Deep Learning</span>
            <p>After implementation of a neural network, we have gained ...</p>
          </section>
          
          <div class="filter"></div>
          <img src="https://i2.wp.com/philosophyofbrains.com/wp-content/uploads/2016/05/Problem-Mental-Causation-Pic.jpg?resize=1280%2C585" alt="">
          
      </div>
      
    </section>
    <section class="post-footer-item comment">
      <div id="disqus_thread"></div>
    </section>
  </section>

  <footer class="g-footer">
  <section>Bikash-Jaiswal Blog ¬©
  
  
    2017
    -
  
  2018
  </section>
  <section>Powered by <a href="//jekyllrb.com">Jekyll</a> | <a href="https://github.com/kaeyleo/jekyll-theme-H2O">Theme H2O</a></section>
</footer>



  
  <script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document,
        s = d.createElement('script');
      s.src = 'https://bikash-jaiswal.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());

      (d.head || d.body).appendChild(s);
    })();
  </script>
  

  <script src="/assets/js/prism.js"></script>
  <script src="/assets/js/index.min.js"></script>
</body>

</html>
